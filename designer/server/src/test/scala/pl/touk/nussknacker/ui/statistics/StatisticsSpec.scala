package pl.touk.nussknacker.ui.statistics

import org.scalatest.funsuite.AnyFunSuite
import org.scalatest.matchers.should.Matchers
import pl.touk.nussknacker.test.utils.{QueryParamsHelper, StatisticEncryptionSupport}

import java.net.URL

class StatisticsSpec extends AnyFunSuite with Matchers {
//  private val cfg = StatisticUrlConfig(plainPublicEncryptionKey = Some(StatisticEncryptionSupport.publicKeyForTest))
  private val cfg = StatisticUrlConfig()

  test("should split parameters into 2 URLS") {
    val threeThousandCharsParam = (1 to 3000).map(_ => "x").mkString
    val sut = new Statistics.NonEmpty(
      new Fingerprint("t"),
      new RequestId("req_id"),
      Map(
        "q1" -> threeThousandCharsParam,
        "q2" -> threeThousandCharsParam,
        "q3" -> threeThousandCharsParam,
        "q4" -> threeThousandCharsParam,
        "q5" -> threeThousandCharsParam,
      )
    )

    sut.prepareURLs(cfg) shouldBe Right(
      List(
        new URL(
          s"https://stats.nussknacker.io/?q1=$threeThousandCharsParam&q2=$threeThousandCharsParam&fingerprint=t&req_id=req_id"
        ),
        new URL(
          s"https://stats.nussknacker.io/?q3=$threeThousandCharsParam&q4=$threeThousandCharsParam&fingerprint=t&req_id=req_id"
        ),
        new URL(s"https://stats.nussknacker.io/?q5=$threeThousandCharsParam&fingerprint=t&req_id=req_id")
      )
    )
//    Right(List(https://stats.nussknacker.io/?
    // 1.
    // 8094: encryptedParams=KCv6kUNt1T/3OMVHGrW0Ok1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVRoekAtC1+lm6iXlJiY3RBVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VMnovYAj62IxtrMgRwRckniUPRkpy1sDFM0u8ei1RcNd8J55jcfNgRswohzBN3id0
    // 358: encryptionKey=q2RMCs+6w2Jri4dhws8+v/ptJJwvtMMiSVF58V6WTranQumLuvS56FBbW8JCl7HAOhoDtT1g1tAD9HdGG//q0GhK4WP9WM8djiPZzjT5t5b6+pJTD0VA1xLDKYOJUKHnEisQQZVj4dzOe2T+/pHv/oq9OWjHT/yL/UMq3yR+hEuwQesFTaDbFbbeb1GRlcVf3exrBNmqDHgWXFiKukz822LJB6VQF0Is28V/1YiKT7h3CSlOI1QYF89KYPJd7LPq1B49m6piCfEjnimeeSS966CHWFtOWxIrtwjRJxd/cvFoP6QLrVgwUQ8gjDV+H43I+WNYzkSwRWUUNroaUt4fXA==
    // 2.
    // 8080: encryptedParams=A4Np2bvb3qnPkYYB7ZBzwE1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVaIV9Rp6iQyXAQZgY9cILmxNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VMnovYAj62IxtrMgRwRckniUPRkpy1sDFM0u8ei1RcNd8J55jcfNgRswohzBN3id0
    // 358: encryptionKey=Yvfa0tPWpOJ37jWLkqVTlIs5gS2KEGqOymb+8h9rwUbCAoDBPiLCCIhBQ7guN48sOwbWl4xc4u+XiYfb1f6PC3fIJbRmQVuBS9j5ql+Oqt7+dULIOB6yujc5o3jJEdxGPmQIguAQp39Lc40M5aGvfejCJaDwr4qU2KVD4wzp7G2ukdHK6K+bmZPykn5XbbIKNZolihFs/XzTwrKU1YOCfbV6ovoseErrXVLVZ1p8lBI4wUj0Mvvh49e1AQzRMPkiigq3R6c+yPXbXWBmDBfkR4Zxe/p25G8vzuNuhH5sJmOeurjn4mEi0npDEQeaKVgJKIUTsktmGOqWCEV+OsMz6w==
    // 3.
    // encryptedParams=8SImayt+SC+O22bd3KNaQ01q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVU1q2UiLi5zuVsZAO1t+jVVNatlIi4uc7lbGQDtbfo1VTWrZSIuLnO5WxkA7W36NVQjPmLVA7ENRc4uuXoQrbGYeQBT4mNNoj4VVEcFQ2UWvqA+diJk0y2qGU1XsapwVvA==
    // encryptionKey=QZsdIBCKqMoWZeWwoW9OOl9z9TXF/95X047M2QWCqZe+oqmtgkoh9YNoHlH9LrORGmDmIdAoR3In9KEPsoYoXqiEdq9JPVUqk15NXEC+Go4OzHfK/UfkCyMLPo6+nofdv8ssmJDuH/M7vlKUT8ph+hDSW7FJ17HGGqPKEJpcyvBIahgokQWbfcTLJazLDR2ueTmt9LK4fzVQZoMgW7fx7PrjyPORYr8SMgcLB4TZIDd0WhfxKkchH5Ip/WjmsB5AaHctjxxPmX+v6fUYBE5hyGMvc5AejSK8FNTKzuWfj9ZYEMvVmfZK16MgLF1hiZes9wUI6WpBApUb60pvvWiEeQ==))
  }

  test("should generate correct url with encoded params") {
    val sut = new Statistics.NonEmpty(
      new Fingerprint("t"),
      new RequestId("req_id"),
      Map("f" -> "a b", "v" -> "1.6.5-a&b=c")
    )
    sut.prepareURLs(cfg) shouldBe Right(
      List(
        new URL("https://stats.nussknacker.io/?f=a+b&v=1.6.5-a%26b%3Dc&fingerprint=t&req_id=req_id")
      )
    )
  }

  test("should return error if the URL cannot be constructed") {
    Statistics.toURL("xd://stats.nussknacker.io/?f=a+b") shouldBe Left(CannotGenerateStatisticsError)
  }

  test("should return encrypted URL if not set otherwise") {
    val cfg = StatisticUrlConfig(plainPublicEncryptionKey = Some(StatisticEncryptionSupport.publicKeyForTest))
    val sut = new Statistics.NonEmpty(
      new Fingerprint("t"),
      new RequestId("req_id"),
      Map("f" -> "a b", "v" -> "1.6.5-a&b=c")
    )
    sut
      .prepareURLs(cfg)
      .getOrElse(List.empty)
      .headOption
      .map { url =>
        StatisticEncryptionSupport.decode(url.toString)
      } shouldBe Some(Map("f" -> "a+b", "v" -> "1.6.5-a%26b%3Dc", "fingerprint" -> "t", "req_id" -> "req_id"))
  }

}
